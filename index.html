<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Dropbox Hero Grid Animation - White Tile First</title>
<style>
  * { margin: 0; padding: 0; box-sizing: border-box; }
  html, body {
    width: 100%; height: 100%; overflow-x: hidden;
    background: #000; color: white; height: 300vh;
    font-family: system-ui, sans-serif;
  }

  body {
    display: flex; justify-content: center; align-items: center;
    background-image:
      linear-gradient(rgba(255,255,255,0.1) 1px, transparent 1px),
      linear-gradient(90deg, rgba(255,255,255,0.1) 1px, transparent 1px);
    background-size: 60px 60px;
  }

  .fibonacci {
    position: fixed;
    top: 50%; left: 50%;
    width: 1144px; height: 704px;
    transform: translate(-50%, -50%);
    transform-origin: center center;
    user-select: none;

    --gap: 40px;
  }

  .tile-container {
    position: absolute;
    box-sizing: border-box;
    padding: var(--gap);
    background-clip: content-box;
    background: #000;
  }

  .tile-content {
    width: 100%; height: 100%;
    border-radius: 16px;
    display: flex; justify-content: center; align-items: center;
    font-size: 1.2rem; font-weight: 600;
    color: white;
  }

  /* Tiles */
  .tile1 { width: 704px; height: 704px; top: 0; left: 0; background: #072d2b; }
  .tile2 { width: 440px; height: 440px; top: 0; left: 704px; background: #f16529; }
  .tile3 { width: 264px; height: 264px; top: 440px; left: 880px; background: #c94422; }
  .tile4 { width: 176px; height: 176px; top: 528px; left: 704px; background: #edf6d9; color: #222; }
  .tile5 { width: 88px; height: 88px; top: 440px; left: 704px; background: #ffffff; color: #222; }
  .tile6 { width: 88px; height: 88px; top: 440px; left: 792px; background: #072d2b; }
</style>
</head>
<body>

<div class="fibonacci" id="fibonacci">
  <div class="tile-container tile1"><div class="tile-content">Box 1</div></div>
  <div class="tile-container tile2"><div class="tile-content">Box 2</div></div>
  <div class="tile-container tile3"><div class="tile-content">Box 3</div></div>
  <div class="tile-container tile4"><div class="tile-content">Box 4</div></div>
  <div class="tile-container tile5"><div class="tile-content">Box 5</div></div>
  <div class="tile-container tile6"><div class="tile-content">Box 6</div></div>
</div>

<script src="https://cdn.jsdelivr.net/npm/gsap@3.13.0/dist/gsap.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/gsap@3.13.0/dist/ScrollTrigger.min.js"></script>
<script>
gsap.registerPlugin(ScrollTrigger);

const fibonacci = document.getElementById('fibonacci');
const tiles = fibonacci.querySelectorAll('.tile-container');
const whiteTile = fibonacci.querySelector('.tile5');
const otherTiles = [...tiles].filter(t => !t.classList.contains('tile5'));

const containerRect = fibonacci.getBoundingClientRect();
const centerX = containerRect.width / 2;
const centerY = containerRect.height / 2;

// White tile initial oversized in center
gsap.set(whiteTile, {
  scale: 10,
  xPercent: -50,
  yPercent: -50,
  top: "50%",
  left: "50%"
});

// Other tiles: radial start outside viewport
otherTiles.forEach(tile => {
  const rect = tile.getBoundingClientRect();
  const tileCenterX = rect.left + rect.width / 2 - containerRect.left;
  const tileCenterY = rect.top + rect.height / 2 - containerRect.top;
  const dx = tileCenterX - centerX;
  const dy = tileCenterY - centerY;

  gsap.set(tile, {
    x: dx * 4,
    y: dy * 4
  });
});

// Timeline synced with scroll
const tl = gsap.timeline({
  scrollTrigger: {
    trigger: document.body,
    start: "top top",
    end: "bottom bottom",
    scrub: 1
  }
});

// Step 1: Shrink white tile into grid (first 40% scroll)
tl.to(whiteTile, {
  scale: 1,
  top: "440px",
  left: "704px",
  xPercent: 0,
  yPercent: 0,
  ease: "power2.inOut"
}, 0);

// Step 2: Other tiles fly in after white tile begins shrinking
tl.to(otherTiles, {
  x: 0,
  y: 0,
  ease: "power3.out",
  stagger: 0.05
}, 0.2);

// Step 3: Shrink gaps to zero gradually
tl.to(fibonacci, {
  "--gap": "0px",
  ease: "power2.inOut"
}, 0);
</script>

</body>
</html>
