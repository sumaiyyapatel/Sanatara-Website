<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Santara Design Co.</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Teko:wght@300..700&display=swap" rel="stylesheet">

  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    html,
    body {
      width: 100%;
      height: 100%;
      overflow-x: hidden;
      color: white;
      height: 300vh;
      font-family: "Teko", sans-serif;
      background: #fff;
    }

    body {
      display: flex;
      justify-content: center;
      align-items: center;
      --gap: 40px;
      background: none;
      overflow: hidden;
      position: relative;
    }

    /* BOTTOM LAYER - Grid lines only, no text */
    .fibonacci-grid {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      transform-origin: center center;
      user-select: none;
      --gap: 40px;
      z-index: 1;
    }

    /* TOP LAYER - Text content only, no lines */
    .fibonacci-content {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      transform-origin: center center;
      user-select: none;
      --gap: 40px;
      z-index: 2;
      color: white;
    }

    /* Default: Vertical layout for mobile/tablet */
    .fibonacci-grid,
    .fibonacci-content {
      width: 704px;
      height: 1144px;
    }

    /* Desktop/laptop: Horizontal layout */
    @media screen and (min-width: 1200px) {
      .fibonacci-grid,
      .fibonacci-content {
        width: 1144px;
        height: 704px;
      }
    }

    .tile-container,
    .grid-tile {
      position: absolute;
      box-sizing: border-box;
      padding: var(--gap);
      background-clip: content-box;
      background: #000;
      user-select: none;
    }

    /* Create line wrapper for grid tiles */
    .tile-lines {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 0;
    }

    /* Vertical lines - orange */
    .tile-lines::before,
    .tile-lines::after {
      content: '';
      position: absolute;
      width: 1px;
      height: 400vh;
      background: rgba(241, 101, 41, 0.15);
      top: -150vh;
      z-index: 0;
      transition: all 0.6s ease;
    }

    .tile-lines::before {
      left: 0;
    }

    .tile-lines::after {
      right: 0;
    }

    /* Horizontal lines - orange */
    .grid-tile::before,
    .grid-tile::after {
      content: '';
      position: absolute;
      height: 1px;
      width: 400vw;
      background: rgba(241, 101, 41, 0.15);
      left: -150vw;
      pointer-events: none;
      z-index: 0;
      transition: all 0.6s ease;
    }

    .grid-tile::before {
      top: 0;
    }

    .grid-tile::after {
      bottom: 0;
    }

    /* Enhanced styling for UI/UX tile borders */
    .grid-tile5 .tile-lines::before,
    .grid-tile5 .tile-lines::after,
    .grid-tile5::before,
    .grid-tile5::after {
      background: rgba(241, 101, 41, 0.3);
      z-index: 0;
    }

    /* Grid lines fade in/out effect during animation */
    .fibonacci-grid[data-animating="true"] .tile-lines::before,
    .fibonacci-grid[data-animating="true"] .tile-lines::after,
    .fibonacci-grid[data-animating="true"] .grid-tile::before,
    .fibonacci-grid[data-animating="true"] .grid-tile::after {
      background: rgba(241, 101, 41, 0.22);
    }

    .tile-content {
      width: 100%;
      height: 100%;
      border-radius: 16px;
      display: flex;
      flex-direction: column;
      text-align: center;
      cursor: pointer;
      position: relative;
      padding: 10% 7%;
      transition: background-color 0.3s ease;
      z-index: 2;
    }

    /* Specific positioning for each tile content */
    .tile1 .tile-content {
      justify-content: flex-start;
      align-items: flex-start;
    }

    .tile2 .tile-content {
      justify-content: flex-start;
      align-items: flex-end;
    }

    .tile3 .tile-content {
      justify-content: flex-end;
      align-items: flex-end;
    }

    .tile4 .tile-content {
      justify-content: flex-end;
      align-items: flex-start;
      text-align: left;
    }

    .tile5 .tile-content,
    .tile6 .tile-content {
      justify-content: center;
      align-items: center;
      padding: 0;
    }

    .tile-text {
      font-weight: 600;
      line-height: 1.2;
      position: relative;
      display: inline-block;
      transition: color 0.5s ease, text-shadow 0.5s ease;
      user-select: none;
    }

    .tile-content .roman {
      order: 1;
      margin-bottom: 4px;
      line-height: 0.5;
    }

    .tile-content .devanagari {
      order: 2;
      line-height: 0.8;
    }

    .tile3 .roman,
    .tile4 .roman,
    .tile6 .roman {
      order: 2;
      margin-top: 4px;
    }

    .tile3 .devanagari,
    .tile4 .devanagari,
    .tile6 .devanagari {
      order: 1;
    }

    /* Font sizes - responsive */
    .tile1 .devanagari,
    .tile1 .roman {
      font-size: 5rem;
    }

    .tile2 .devanagari,
    .tile2 .roman {
      font-size: 4rem;
    }

    .tile3 .devanagari,
    .tile3 .roman {
      font-size: 3rem;
    }

    .tile4 .devanagari,
    .tile4 .roman {
      font-size: 2rem;
    }

    .tile6 .devanagari,
    .tile6 .roman {
      font-size: 1.5rem;
    }

    /* Larger font sizes for desktop */
    @media screen and (min-width: 1200px) {
      .tile1 .devanagari,
      .tile1 .roman {
        font-size: 7rem;
      }

      .tile2 .devanagari,
      .tile2 .roman {
        font-size: 5.5rem;
      }

      .tile3 .devanagari,
      .tile3 .roman {
        font-size: 4.5rem;
      }

      .tile4 .devanagari,
      .tile4 .roman {
        font-size: 3rem;
      }

      .tile6 .devanagari,
      .tile6 .roman {
        font-size: 2rem;
      }
    }

    /* Tile-specific colors for Roman text */
    .tile1 .roman {
      color: #f16529;
    }

    .tile2 .roman {
      color: #042B29;
    }

    .tile3 .roman {
      color: #042B29;
    }

    .tile4 .roman {
      color: #c94422;
    }

    .tile5 .roman {
      color: #ffffff;
    }

    .tile6 .roman {
      color: #c94422;
    }

    /* Base Devanagari text stroked with matching tile background */
    .tile1 .devanagari {
      color: #072d2b;
      text-shadow:
        -1px -1px 0 #EDF7D2,
        1px -1px 0 #EDF7D2,
        -1px 1px 0 #EDF7D2,
        1px 1px 0 #EDF7D2;
    }

    .tile2 .devanagari {
      color: #f16529;
      text-shadow:
        -1px -1px 0 #EDF7D2,
        1px -1px 0 #EDF7D2,
        -1px 1px 0 #EDF7D2,
        1px 1px 0 #EDF7D2;
    }

    .tile3 .devanagari {
      color: #c94422;
      text-shadow:
        -1px -1px 0 #EDF7D2,
        1px -1px 0 #EDF7D2,
        -1px 1px 0 #EDF7D2,
        1px 1px 0 #EDF7D2;
    }

    .tile4 .devanagari {
      color: #edf6d9;
      text-shadow:
        -1px -1px 0 #042B29,
        1px -1px 0 #042B29,
        -1px 1px 0 #042B29,
        1px 1px 0 #042B29;
    }

    .tile5 .devanagari {
      color: #f16529;
    }

    .tile6 .devanagari {
      color: #ffffff;
      text-shadow:
        -1px -1px 0 #042B29,
        1px -1px 0 #042B29,
        -1px 1px 0 #042B29,
        1px 1px 0 #042B29;
    }

    /* Hover logic for the entire tile */
    .tile-content:hover .devanagari {
      text-shadow: none;
    }

    .tile1 .tile-content:hover .devanagari {
      color: #EDF7D2;
    }

    .tile2 .tile-content:hover .devanagari {
      color: #EDF7D2;
    }

    .tile3 .tile-content:hover .devanagari {
      color: #EDF7D2;
    }

    .tile4 .tile-content:hover .devanagari {
      color: #042B29;
    }

    .tile5 .tile-content:hover .devanagari {
      color: #edf6d9;
    }

    .tile6 .tile-content:hover .devanagari {
      color: #042B29;
    }

    /* DEFAULT: Vertical layout (mobile/tablet) tile positions */
    .tile1,
    .grid-tile1 {
      width: 704px;
      height: 704px;
      top: 0;
      left: 0;
      background: #072d2b;
    }

    .tile2,
    .grid-tile2 {
      width: 440px;
      height: 440px;
      top: 704px;
      left: 264px;
      background: #f16529;
    }

    .tile3,
    .grid-tile3 {
      width: 264px;
      height: 264px;
      top: 880px;
      left: 0;
      background: #c94422;
    }

    .tile4,
    .grid-tile4 {
      width: 176px;
      height: 176px;
      top: 704px;
      left: 0px;
      background: #edf6d9;
      color: #222;
    }

    .tile5,
    .grid-tile5 {
      width: 88px;
      height: 88px;
      top: 704px;
      left: 176px;
      background: #072d2b;
      color: #222;
    }

    .tile6,
    .grid-tile6 {
      width: 88px;
      height: 88px;
      top: 792px;
      left: 176px;
      background: #ffffff;
    }

    /* DESKTOP: Horizontal layout */
    @media screen and (min-width: 1200px) {
      .tile1,
      .grid-tile1 {
        width: 704px;
        height: 704px;
        top: 0;
        left: 0;
        background: #072d2b;
      }

      .tile2,
      .grid-tile2 {
        width: 440px;
        height: 440px;
        top: 0;
        left: 704px;
        background: #f16529;
      }

      .tile3,
      .grid-tile3 {
        width: 264px;
        height: 264px;
        top: 440px;
        left: 880px;
        background: #c94422;
      }

      .tile4,
      .grid-tile4 {
        width: 176px;
        height: 176px;
        top: 528px;
        left: 704px;
        background: #edf6d9;
        color: #222;
      }

      .tile5,
      .grid-tile5 {
        width: 88px;
        height: 88px;
        top: 440px;
        left: 704px;
        background: #072d2b;
        color: #222;
      }

      .tile6,
      .grid-tile6 {
        width: 88px;
        height: 88px;
        top: 440px;
        left: 792px;
        background: #ffffff;
      }
    }

    /* Mobile optimizations */
    @media screen and (max-width: 480px) {
      body {
        --gap: 20px;
      }
      
      .fibonacci-grid,
      .fibonacci-content {
        transform: translate(-50%, -50%) scale(0.8);
      }
    }

    /* Tablet optimizations */
    @media screen and (min-width: 481px) and (max-width: 1199px) {
      body {
        --gap: 30px;
      }
      
      .fibonacci-grid,
      .fibonacci-content {
        transform: translate(-50%, -50%) scale(0.9);
      }
    }
  </style>
</head>

<body>
  <!-- BOTTOM LAYER - Grid lines only -->
  <div class="fibonacci-grid" id="fibonacci-grid">
    <div class="grid-tile grid-tile1" data-pair="1">
      <div class="tile-lines"></div>
    </div>
    <div class="grid-tile grid-tile2" data-pair="2">
      <div class="tile-lines"></div>
    </div>
    <div class="grid-tile grid-tile3" data-pair="3">
      <div class="tile-lines"></div>
    </div>
    <div class="grid-tile grid-tile4" data-pair="4">
      <div class="tile-lines"></div>
    </div>
    <div class="grid-tile grid-tile5" data-pair="5">
      <div class="tile-lines"></div>
    </div>
    <div class="grid-tile grid-tile6" data-pair="6">
      <div class="tile-lines"></div>
    </div>
  </div>

  <!-- TOP LAYER - Text content only -->
  <div class="fibonacci-content" id="fibonacci-content">
    <div class="tile-container tile1" data-pair="1">
      <div class="tile-content">
        <div class="tile-text roman" data-text="SERVICES">SERVICES</div>
        <div class="tile-text devanagari" data-text="सेवाएं">सेवाएं</div>
      </div>
    </div>
    <div class="tile-container tile2" data-pair="2">
      <div class="tile-content">
        <div class="tile-text roman" data-text="WORK">WORK</div>
        <div class="tile-text devanagari" data-text="काम काज">काम काज</div>
      </div>
    </div>
    <div class="tile-container tile3" data-pair="3">
      <div class="tile-content">
        <div class="tile-text devanagari" data-text="संपर्क">संपर्क</div>
        <div class="tile-text roman" data-text="CONTACT">CONTACT</div>
      </div>
    </div>
    <div class="tile-container tile4" data-pair="4">
      <div class="tile-content">
        <div class="tile-text devanagari" data-text="जान-पहचान">जान-पहचान</div>
        <div class="tile-text roman" data-text="ABOUT">ABOUT</div>
      </div>
    </div>
    <div class="tile-container tile5" data-pair="5">
      <div class="tile-content">
        <div class="tile-text roman" data-text="UI">UI</div>
        <div class="tile-text devanagari" data-text="UX">UX</div>
      </div>
    </div>
    <div class="tile-container tile6" data-pair="6">
      <div class="tile-content">
        <div class="tile-text roman" data-text="BLOGS">BLOGS</div>
        <div class="tile-text devanagari" data-text="लेख">लेख</div>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/gsap@3.13.0/dist/gsap.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/gsap@3.13.0/dist/ScrollTrigger.min.js"></script>
  <script>
    gsap.registerPlugin(ScrollTrigger);

    // Get both layers
    const fibonacciGrid = document.getElementById('fibonacci-grid');
    const fibonacciContent = document.getElementById('fibonacci-content');

    // Function to determine if we're on desktop
    const isDesktop = () => window.innerWidth >= 1200;

    // Create perfectly matched tile pairs using data attributes
    const tilePairs = [];
    for (let i = 1; i <= 6; i++) {
      const gridTile = fibonacciGrid.querySelector(`[data-pair="${i}"]`);
      const contentTile = fibonacciContent.querySelector(`[data-pair="${i}"]`);
      tilePairs.push({ grid: gridTile, content: contentTile, id: i });
    }

    // Function to get container dimensions based on layout
    const getContainerDimensions = () => {
      return isDesktop() 
        ? { width: 1144, height: 704 }
        : { width: 704, height: 1144 };
    };

    // Function to get tile properties based on layout
    const getTileProps = (id) => {
      if (isDesktop()) {
        // Horizontal layout
        return {
          1: { width: 704, height: 704, top: 0, left: 0 },
          2: { width: 440, height: 440, top: 0, left: 704 },
          3: { width: 264, height: 264, top: 440, left: 880 },
          4: { width: 176, height: 176, top: 528, left: 704 },
          5: { width: 88, height: 88, top: 440, left: 704 },
          6: { width: 88, height: 88, top: 440, left: 792 }
        }[id];
      } else {
        // Vertical layout
        return {
          1: { width: 704, height: 704, top: 0, left: 0 },
          2: { width: 440, height: 440, top: 704, left: 264 },
          3: { width: 264, height: 264, top: 880, left: 0 },
          4: { width: 176, height: 176, top: 704, left: 0 },
          5: { width: 88, height: 88, top: 704, left: 176 },
          6: { width: 88, height: 88, top: 792, left: 176 }
        }[id];
      }
    };

    // Function to get final position for UI/UX tile
    const getUIUXFinalPosition = () => {
      return isDesktop() 
        ? { top: "440px", left: "704px" }
        : { top: "704px", left: "176px" };
    };

    // Function to initialize animation
    const initAnimation = () => {
      // Clear existing ScrollTriggers
      ScrollTrigger.getAll().forEach(trigger => trigger.kill());

      const containerRect = getContainerDimensions();
      const centerX = containerRect.width / 2;
      const centerY = containerRect.height / 2;

      // Special handling for UI/UX tile (tile 5)
      const uiuxPair = tilePairs.find(pair => pair.id === 5);
      const otherPairs = tilePairs.filter(pair => pair.id !== 5);

      // Set initial state for UI/UX tile (scaled and centered)
      gsap.set([uiuxPair.grid, uiuxPair.content], {
        scale: 10,
        xPercent: -50,
        yPercent: -50,
        top: "50%",
        left: "50%",
        transformOrigin: "center center"
      });

      // Set initial positions for other tiles (displaced from center)
      otherPairs.forEach(pair => {
        const tileProps = getTileProps(pair.id);
        const tileCenterX = tileProps.left + tileProps.width / 2;
        const tileCenterY = tileProps.top + tileProps.height / 2;
        const dx = tileCenterX - centerX;
        const dy = tileCenterY - centerY;

        // Apply synchronized displacement to both tiles in the pair
        gsap.set([pair.grid, pair.content], {
          x: dx * 4,
          y: dy * 4,
          transformOrigin: "center center"
        });
      });

      // Add grid animation state tracking
      fibonacciGrid.setAttribute('data-animating', 'false');

      // Create main timeline
      const tl = gsap.timeline({
        scrollTrigger: {
          trigger: document.body,
          start: "top top",
          end: "bottom bottom",
          scrub: 1,
          onUpdate: (self) => {
            const progress = self.progress;
            if (progress > 0.1 && progress < 0.9) {
              fibonacciGrid.setAttribute('data-animating', 'true');
            } else {
              fibonacciGrid.setAttribute('data-animating', 'false');
            }
          }
        }
      });

      // Animate UI/UX tile back to normal size and position
      const finalPos = getUIUXFinalPosition();
      tl.to([uiuxPair.grid, uiuxPair.content], {
        scale: 1,
        top: finalPos.top,
        left: finalPos.left,
        xPercent: 0,
        yPercent: 0,
        ease: "power2.inOut",
        duration: 0.6
      }, 0);

      // Animate all other tiles together
      tl.to(otherPairs.map(pair => [pair.grid, pair.content]).flat(), {
        x: 0,
        y: 0,
        ease: "power3.out",
        duration: 0.8
      }, 0.2);

      // Animate gap reduction for both layers simultaneously
      tl.to([fibonacciGrid, fibonacciContent, document.body], {
        "--gap": "0px",
        ease: "power2.inOut",
        duration: 2
      }, 0);
    };

    // Initialize on load
    initAnimation();

    // Reinitialize on window resize with debouncing
    let resizeTimeout;
    window.addEventListener('resize', () => {
      clearTimeout(resizeTimeout);
      resizeTimeout = setTimeout(initAnimation, 250);
    });

    console.log("Responsive Fibonacci grid animation initialized");
  </script>

</body>

</html>
